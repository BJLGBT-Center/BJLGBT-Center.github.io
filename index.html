<!DOCTYPE html>
<!-- 
    hizhongxu@gmail.com
    https://github.com/ZhongxuYang
 -->
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,user-scalable=no">
<title></title>
<link rel="stylesheet" href="css/reset.css">
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/swiper-3.4.2.min.css">
    <script>
        <!--图片预加载-->
        document.addEventListener('touchstart',function(ev){
            ev.preventDefault();
        });
        function setload(){
            var data = [];//用来存放所有的图片
            var load = document.getElementById('bg');
            var logoText = document.getElementById('load_text');

            for(var attr in imgData){
                //for in循环数组键值对,把所有图片放在一个数组里
                data = data.concat(imgData[attr]);
            }
            var num = 0;//计算加载进来图片个数
            var len = data.length;
            for(var i=0;i<len;i++){
                var img = new Image();
                img.src = data[i];//把每张图片都从服务器下载到本地
                img.onload = function(){
                    num++;
                    var per = Math.floor(num/len*100);
                    logoText.innerHTML = '正在回到6月11日 ' + per + '%';
                    if( num == len ){
                        MTween({
                            el: load,
                            target: {opacity:0},
                            time: 1000,
                            type: 'easeOut',
                            callBack: function(){
                                document.body.removeChild(load);
                            }
                        });
                    }
                }
            }
        }
        window.onload = function(){
            var figer = document.getElementById("figer");
            var text = document.getElementById("load_text");
            var logo = document.getElementById("loader_transform");

            figer.addEventListener("touchstart",function(){
                figer.className = "hide";
                logo.className = "loader";
                text.className = "";
                setload();
            })
        }
    </script>
</head>
<body>
    <div id="bg">
        <canvas id="canvas"></canvas>
        <div id="loader">
            <div id="loader_box">
                <div id="loader_transform"></div>
                <div id="figer"></div>
                <div id="load_text" class="hide">正在回到6月11日 0%</div>
            </div>
        </div>
    </div>

    <div id="content">
        <div id="part1">
            <img src="img/part/part-1.png">
        </div>
        <div id="part2">
            <img src="img/part/part-2-1.png">
            <img src="img/part/part-2-2.png" style="opacity: 0">
            <img src="img/logo/figer.png">
        </div>
    </div>







<script src="js/imgData.js" charset="utf-8"></script>
<script src="js/m.Tween.js" charset="utf-8"></script>
<script src="js/swiper-3.4.2.min.js"></script>
<script src="js/index.js" charset="utf-8"></script>

</body>
</html>
